/**
 * donut-indent 0.0.1
 * Copyright (c) 2015, kenji0x02. MIT Licensed
 * https://github.com/kenji0x02/donut-indent 
 */
!function n(t,e,r){function o(i,u){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=e[i]={exports:{}};t[i][0].call(l.exports,function(n){var e=t[i][1][n];return o(e?e:n)},l,l.exports,n,t,e,r)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(n,t,e){function r(n){var t=[],n=n.replace(/^#/,"");return t=6==n.length?n.match(/.{2}/g).map(function(n){return parseInt(n,16)}):n.split("").map(function(n){return parseInt(n+n,16)})}function o(n,t,e){return"#"+[n,t,e].map(function(n){return n.toString(16).replace(/^[0-9a-f]$/,"0$&")}).join("")}function a(n,t,e){var r,o,a;n/=255,t/=255,e/=255;var i=Math.max(Math.max(n,t),e),u=Math.min(Math.min(n,t),e);for(r=i==u?0:i==n?60*(t-e)/(i-u)+0:i==t?60*(e-n)/(i-u)+120:60*(n-t)/(i-u)+240;0>r;)r+=360;return o=(i+u)/2,a=i==u?0:.5>o?(i-u)/(i+u):(i-u)/(2-i-u),{h:r,l:o,s:a,type:"HLS"}}function i(n,t,e){for(var r,o,a;0>n;)n+=360;if(n%=360,0==e)return t=Math.round(255*t),{r:t,g:t,b:t,type:"RGB"};var i,u=.5>t?t*(1+e):t+e-t*e,c=2*t-u;return i=n+120,i>360&&(i-=360),r=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n,o=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n-120,0>i&&(i+=360),a=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*a),type:"RGB"}}t.exports.darken=function(n,t){var e=r(n),u=a(e[0],e[1],e[2]),c=i(u.h,u.l-.01*t,u.s);return o(c.r,c.g,c.b)}},{}],2:[function(n,t,e){!function(t){"use strict";function e(n){return t(n+":header").css("fontSize").replace("px","")-0}function r(n){return t(n+":header").css("line-height").replace("px","")-0}function o(n){return Math.round(.45*n)}function a(n,t){return Math.round(.05*t+.5*(n-t))}function i(n){return Math.round(.45*n)}function u(n,e,r){t(r).css("margin-top",e),t(r).css("margin-right",e),r.width=n,r.height=n}function c(n,t,e,r,o){var a=o.getContext("2d"),i=1.5707963267948966,u=-i,c=i*(.04*e-1);a.beginPath(),a.moveTo(t,t),a.arc(t,t,n,u,c,!1),a.fillStyle=r,a.fill()}function d(n){var t=n.replace("donut_indent_","").split("_").map(function(n){return n-0}),d="h"+t.filter(function(n,t,e){return 0!=n}).length,l=e(d),f=r(d),s=o(l),h=a(f,l),v=i(l),m=document.getElementById(n);u(2*s,h,m),t.forEach(function(n,t,e){var r=Math.round(s*$.radiusRatio[t]);c(r-1,v,100,"#fff",m),c(r,v,n,$.color[t],m)})}function l(n){var e={};$.headerTagNumbers.forEach(function(n){e[n]=0});var r=[];return t.each(n,function(n,o){var a=t.extend(!0,{},e);n>0&&(a=t.extend(!0,{},r[n-1]));var i=m.headingNumber(o);a.headerNumber=i,a[i]+=1,$.headerTagNumbers.forEach(function(n){n>i&&(a[n]=0)}),r.push(a)}),r}function f(n){for(var t=1;t<n.length;t++){if(n[t].headerNumber<n[t-1].headerNumber){var e=$.headerTagNumbers.filter(function(e){return e>n[t].headerNumber});e.forEach(function(e,r,o){for(var a=n[t-1][e],i=t-1;i>0&&0!=n[i][e];i--)n[i][e]=Math.round(n[i][e]/a*100)})}t==n.length-1&&$.headerTagNumbers.forEach(function(e,r,o){for(var a=n[t][e],i=t;i>=0&&0!=n[i][e];i--)n[i][e]=Math.round(n[i][e]/a*100)})}return n}function s(n){var t=f(l(n));return t.map(function(n,t,e){return g+$.headerTagNumbers.map(function(t){return n[t]}).join("_")})}function h(n,e){t.each(n,function(n,r){t(r).wrap("<div></div>");var o='<div class="donut-indent" style="float:left;"><canvas id="'+e[n]+'"></div>';t(r).before(o)})}function v(){var e=t(":header"),r=s(e);h(e,r),r.forEach(function(n){d(n)});var o=n("./overlay-content.js"),a=o.create(e,r);o.initialize(),t("#modal-content").append(a)}var m=(n("./modal.js"),n("./utils.js")),p=10,g="donut_indent_",$={};$={defaults:{indentDepth:3,color:"#59bb0c",gammmaValue:1.8},settings:t.extend(!0,{},$.defaults),init:function(e){var r=n("./color.js");$.settings=t.extend($.defaults,e),$.headerTagNumbers=Array.apply(null,Array($.settings.indentDepth)).map(function(n,t){return t+1}),$.radiusRatio=t.extend(!0,[],$.headerTagNumbers).reverse().map(function(n){return Math.pow(1*n/$.headerTagNumbers.length,1/$.settings.gammmaValue)}),$.color=$.headerTagNumbers.map(function(n){return r.darken($.settings.color,p*(n-1))})}},t.donutIndent=function(n){$.init(n),v()}}(jQuery),$.donutIndent()},{"./color.js":1,"./modal.js":3,"./overlay-content.js":4,"./utils.js":5}],3:[function(n,t,e){function r(){var n=$(window).width(),t=$(window).height(),e=$("#modal-content").outerWidth(),r=$("#modal-content").outerHeight();if(r>t&&e>n)$("#modal-content").css({left:"0px",top:"0px"});else if(r>t&&n>e){var a=(n-o-e)/2;$("#modal-content").css({left:a+"px",top:"0px"})}else if(t>r&&e>n){var i=(t-o-r)/2;$("#modal-content").css({left:"0px",top:i+"px"})}else{var a=(n-e)/2,i=(t-r)/2;$("#modal-content").css({left:a+"px",top:i+"px"})}}$("html").append('<div class="scrollbar" style="overflow:scroll;"></div>');var o=window.innerWidth-$(".scrollbar").prop("clientWidth");$(".scrollbar").hide(),$(document).on("click",".donut-indent",function(){return $("html, body").addClass("lock"),$("#modal-overlay").length>0?!1:($("body").append('<div id="modal-overlay"></div>'),$("#modal-overlay").fadeIn("slow"),$("#modal-content").wrap("<div id='modal-wrap'></div>"),$("#modal-wrap").show(),r(),$("#modal-content").fadeIn("slow"),void $("#modal-wrap, .overlay_anchor").off().on("click",function(){$("#modal-content,#modal-overlay").fadeOut("slow",function(){$("html, body").removeClass("lock"),$("#modal-overlay").remove(),$("#modal-content").unwrap("<div id='modal-wrap'></div>")})}))}),$(window).resize(r)},{}],4:[function(n,t,e){function r(n,t){var e=a(1),r=0,c=l.headingNumber(n[0])-u(n);e+=a(c),r+=c;for(var d=0;d<n.length-1;d++){var f=n[d];e+=o($(f).text(),t[d]);var s=l.headingNumber(n[d+1])-l.headingNumber(n[d]);e+=a(s),e+=i(s),r+=s}var h=n[n.length-1];return e+=o($(h).text(),t[n.length-1]),e+=i(-r)}function o(n,t){var e=d(t);return'<li><a class="overlay_anchor" href="#'+t+'" id="'+e+'">'+n+"</a></li>"}function a(n){var t="";if(n>0)for(var e=0;n>e;e++)t+="<ul>";return t}function i(n){var t="";if(0>n)for(var e=0;-n>e;e++)t+="</ul>";return t}function u(n){var t=6;return $.each(n,function(n,e){var r=l.headingNumber(e);t>r&&(t=r)}),t}function c(){$("#modal-content").length>0?$("#modal-content").children().remove():$("body").append('<div id="modal-content"></div>')}function d(n){return n+"_overlay"}var l=n("./utils.js");$(document).on("click",".donut-indent",function(){var n="#"+d($(this).children("canvas").attr("id"));console.log(n),console.log("clicked"),$(n).css("font-weight","bold"),$("#modal-wrap, .overlay_anchor").on("click",function(){$(n).css("font-weight",""),console.log(n)})}),t.exports={create:r,initialize:c}},{"./utils.js":5}],5:[function(n,t,e){var r=function(n){return void 0!==n?n.tagName.replace("H","")-0:null};t.exports={headingNumber:r}},{}]},{},[2]);