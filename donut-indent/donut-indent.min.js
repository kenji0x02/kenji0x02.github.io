/**
 * donut-indent 0.0.1
 * Copyright (c) 2015, kenji0x02. MIT Licensed
 * https://github.com/kenji0x02/donut-indent 
 */
!function n(r,e,t){function o(i,u){if(!e[i]){if(!r[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=e[i]={exports:{}};r[i][0].call(l.exports,function(n){var e=r[i][1][n];return o(e?e:n)},l,l.exports,n,r,e,t)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(n,r,e){function t(n){var r=[],n=n.replace(/^#/,"");return r=6==n.length?n.match(/.{2}/g).map(function(n){return parseInt(n,16)}):n.split("").map(function(n){return parseInt(n+n,16)})}function o(n,r,e){return"#"+[n,r,e].map(function(n){return n.toString(16).replace(/^[0-9a-f]$/,"0$&")}).join("")}function a(n,r,e){var t,o,a;n/=255,r/=255,e/=255;var i=Math.max(Math.max(n,r),e),u=Math.min(Math.min(n,r),e);for(t=i==u?0:i==n?60*(r-e)/(i-u)+0:i==r?60*(e-n)/(i-u)+120:60*(n-r)/(i-u)+240;0>t;)t+=360;return o=(i+u)/2,a=i==u?0:.5>o?(i-u)/(i+u):(i-u)/(2-i-u),{h:t,l:o,s:a,type:"HLS"}}function i(n,r,e){for(var t,o,a;0>n;)n+=360;if(n%=360,0==e)return r=Math.round(255*r),{r:r,g:r,b:r,type:"RGB"};var i,u=.5>r?r*(1+e):r+e-r*e,c=2*r-u;return i=n+120,i>360&&(i-=360),t=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n,o=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n-120,0>i&&(i+=360),a=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,{r:Math.round(255*t),g:Math.round(255*o),b:Math.round(255*a),type:"RGB"}}r.exports.darken=function(n,r){var e=t(n),u=a(e[0],e[1],e[2]),c=i(u.h,u.l-.01*r,u.s);return o(c.r,c.g,c.b)}},{}],2:[function(n,r,e){!function(r){"use strict";function e(n){return r(n+":header").css("fontSize").replace("px","")-0}function t(n){return r(n+":header").css("line-height").replace("px","")-0}function o(n){return Math.round(.45*n)}function a(n,r){return Math.round(.05*r+.5*(n-r))}function i(n){return Math.round(.45*n)}function u(n,e,t){r(t).css("margin-top",e),r(t).css("margin-right",e),t.width=n,t.height=n}function c(n,r,e,t,o){var a=o.getContext("2d"),i=1.5707963267948966,u=-i,c=i*(.04*e-1);a.beginPath(),a.moveTo(r,r),a.arc(r,r,n,u,c,!1),a.fillStyle=t,a.fill()}function d(n){var r=n.replace("donut_indent_","").split("_").map(function(n){return n-0}),d="h"+r.filter(function(n,r,e){return 0!=n}).length,l=e(d),f=t(d),s=o(l),h=a(f,l),m=i(l),v=document.getElementById(n);u(2*s,h,v),r.forEach(function(n,r,e){var t=Math.round(s*$.radiusRatio[r]);c(t-1,m,100,"#fff",v),c(t,m,n,$.color[r],v)})}function l(n){var e={};$.headerTagNumbers.forEach(function(n){e[n]=0});var t=[];return r.each(n,function(n,o){var a=r.extend(!0,{},e);n>0&&(a=r.extend(!0,{},t[n-1]));var i=v.headingNumber(o);a.headerNumber=i,a[i]+=1,$.headerTagNumbers.forEach(function(n){n>i&&(a[n]=0)}),t.push(a)}),t}function f(n){for(var r=1;r<n.length;r++){if(n[r].headerNumber<n[r-1].headerNumber){var e=$.headerTagNumbers.filter(function(e){return e>n[r].headerNumber});e.forEach(function(e,t,o){for(var a=n[r-1][e],i=r-1;i>0&&0!=n[i][e];i--)n[i][e]=Math.round(n[i][e]/a*100)})}r==n.length-1&&$.headerTagNumbers.forEach(function(e,t,o){for(var a=n[r][e],i=r;i>=0&&0!=n[i][e];i--)n[i][e]=Math.round(n[i][e]/a*100)})}return n}function s(n){var r=f(l(n));return r.map(function(n,r,e){return g+$.headerTagNumbers.map(function(r){return n[r]}).join("_")})}function h(n,e){r.each(n,function(n,t){r(t).wrap("<div></div>");var o='<div class="donut-indent" style="float:left;"><canvas id="'+e[n]+'"></div>';r(t).before(o)})}function m(){var e=r(":header"),t=s(e);h(e,t),t.forEach(function(n){d(n)});var o=n("./overlay-content.js"),a=o.create(e,t);o.initialize(),r("#modal-content").prepend(a)}var v=(n("./modal.js"),n("./utils.js")),p=10,g="donut_indent_",$={};$={defaults:{indentDepth:3,color:"#59bb0c",gammmaValue:1.8},settings:r.extend(!0,{},$.defaults),init:function(e){var t=n("./color.js");$.settings=r.extend($.defaults,e),$.headerTagNumbers=Array.apply(null,Array($.settings.indentDepth)).map(function(n,r){return r+1}),$.radiusRatio=r.extend(!0,[],$.headerTagNumbers).reverse().map(function(n){return Math.pow(1*n/$.headerTagNumbers.length,1/$.settings.gammmaValue)}),$.color=$.headerTagNumbers.map(function(n){return t.darken($.settings.color,p*(n-1))})}},r.donutIndent=function(n){$.init(n),m()}}(jQuery),$.donutIndent()},{"./color.js":1,"./modal.js":3,"./overlay-content.js":4,"./utils.js":5}],3:[function(n,r,e){function t(){var n=$(window).width(),r=$(window).height(),e=$("#modal-content").outerWidth(),t=$("#modal-content").outerHeight();if(t>r&&e>n)$("#modal-content").css({left:"0px",top:"0px"});else if(t>r&&n>e){var a=(n-o-e)/2;$("#modal-content").css({left:a+"px",top:"0px"})}else if(r>t&&e>n){var i=(r-o-t)/2;$("#modal-content").css({left:"0px",top:i+"px"})}else{var a=(n-e)/2,i=(r-t)/2;$("#modal-content").css({left:a+"px",top:i+"px"})}}$("html").append('<div class="scrollbar" style="overflow:scroll;"></div>');var o=window.innerWidth-$(".scrollbar").prop("clientWidth");$(".scrollbar").hide(),$(document).on("click",".donut-indent",function(){return $("html, body").addClass("lock"),$("#modal-overlay").length>0?!1:($("body").append('<div id="modal-overlay"></div>'),$("#modal-overlay").fadeIn("slow"),$("#modal-content").wrap("<div id='modal-wrap'></div>"),$("#modal-wrap").show(),t(),$("#modal-content").fadeIn("slow"),void $("#modal-wrap, #modal-close, .overlay_anchor").off().on("click",function(){$("#modal-content,#modal-overlay").fadeOut("slow",function(){$("html, body").removeClass("lock"),$("#modal-overlay").remove(),$("#modal-content").unwrap("<div id='modal-wrap'></div>")})}))}),$(window).resize(t)},{}],4:[function(n,r,e){function t(n,r){var e=a(1),t=0,c=d.headingNumber(n[0])-u(n);e+=a(c),t+=c;for(var l=0;l<n.length-1;l++){var f=n[l];e+=o($(f).text(),r[l]);var s=d.headingNumber(n[l+1])-d.headingNumber(n[l]);e+=a(s),e+=i(s),t+=s}var h=n[n.length-1];return e+=o($(h).text(),r[n.length-1]),e+=i(-t)}function o(n,r){return'<li><a class="overlay_anchor" href=#'+r+">"+n+"</a></li>"}function a(n){var r="";if(n>0)for(var e=0;n>e;e++)r+="<ul>";return r}function i(n){var r="";if(0>n)for(var e=0;-n>e;e++)r+="</ul>";return r}function u(n){var r=6;return $.each(n,function(n,e){var t=d.headingNumber(e);r>t&&(r=t)}),r}function c(){$("#modal-content").length>0?$("#modal-content").children().remove():$("body").append('<div id="modal-content"></div>')}var d=n("./utils.js");r.exports={create:t,initialize:c}},{"./utils.js":5}],5:[function(n,r,e){var t=function(n){return void 0!==n?n.tagName.replace("H","")-0:null};r.exports={headingNumber:t}},{}]},{},[2]);