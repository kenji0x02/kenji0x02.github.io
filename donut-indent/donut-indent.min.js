/**
 * donut-indent 0.0.1
 * Copyright (c) 2015, kenji0x02. MIT Licensed
 * https://github.com/kenji0x02/donut-indent 
 */
!function n(r,e,t){function o(u,i){if(!e[u]){if(!r[u]){var c="function"==typeof require&&require;if(!i&&c)return c(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var d=e[u]={exports:{}};r[u][0].call(d.exports,function(n){var e=r[u][1][n];return o(e?e:n)},d,d.exports,n,r,e,t)}return e[u].exports}for(var a="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(n,r,e){function t(n){var r=[],n=n.replace(/^#/,"");return r=6==n.length?n.match(/.{2}/g).map(function(n){return parseInt(n,16)}):n.split("").map(function(n){return parseInt(n+n,16)})}function o(n,r,e){return"#"+[n,r,e].map(function(n){return n.toString(16).replace(/^[0-9a-f]$/,"0$&")}).join("")}function a(n,r,e){var t,o,a;n/=255,r/=255,e/=255;var u=Math.max(Math.max(n,r),e),i=Math.min(Math.min(n,r),e);for(t=u==i?0:u==n?60*(r-e)/(u-i)+0:u==r?60*(e-n)/(u-i)+120:60*(n-r)/(u-i)+240;0>t;)t+=360;return o=(u+i)/2,a=u==i?0:.5>o?(u-i)/(u+i):(u-i)/(2-u-i),{h:t,l:o,s:a,type:"HLS"}}function u(n,r,e){for(var t,o,a;0>n;)n+=360;if(n%=360,0==e)return r=Math.round(255*r),{r:r,g:r,b:r,type:"RGB"};var u,i=.5>r?r*(1+e):r+e-r*e,c=2*r-i;return u=n+120,u>360&&(u-=360),t=60>u?c+(i-c)*u/60:180>u?i:240>u?c+(i-c)*(240-u)/60:c,u=n,o=60>u?c+(i-c)*u/60:180>u?i:240>u?c+(i-c)*(240-u)/60:c,u=n-120,0>u&&(u+=360),a=60>u?c+(i-c)*u/60:180>u?i:240>u?c+(i-c)*(240-u)/60:c,{r:Math.round(255*t),g:Math.round(255*o),b:Math.round(255*a),type:"RGB"}}r.exports.darken=function(n,r){var e=t(n),i=a(e[0],e[1],e[2]),c=u(i.h,i.l-.01*r,i.s);return o(c.r,c.g,c.b)}},{}],2:[function(n,r,e){!function(r){"use strict";function e(n){return r(n+":header").css("fontSize").replace("px","")-0}function t(n){return r(n+":header").css("line-height").replace("px","")-0}function o(n){return Math.round(.45*n)}function a(n,r){return Math.round(.05*r+.5*(n-r))}function u(n){return Math.round(.45*n)}function i(n,e,t){r(t).css("margin-top",e),r(t).css("margin-right",e),t.width=n,t.height=n}function c(n,r,e,t,o){var a=o.getContext("2d"),u=1.5707963267948966,i=-u,c=u*(.04*e-1);a.beginPath(),a.moveTo(r,r),a.arc(r,r,n,i,c,!1),a.fillStyle=t,a.fill()}function f(n){var r=n.replace("donut_indent_","").split("_").map(function(n){return n-0}),f="h"+r.filter(function(n,r,e){return 0!=n}).length,d=e(f),l=t(f),h=o(d),s=a(l,d),m=u(d),v=document.getElementById(n);i(2*h,s,v),r.forEach(function(n,r,e){var t=Math.round(h*g.radiusRatio[r]);c(t-1,m,100,"#fff",v),c(t,m,n,g.color[r],v)})}function d(n){var e={};g.headerTagNumbers.forEach(function(n){e[n]=0});var t=[];return r.each(n,function(n,o){var a=r.extend(!0,{},e);n>0&&(a=r.extend(!0,{},t[n-1]));var u=o.tagName.replace("H","")-0;a.headerNumber=u,a[u]+=1,g.headerTagNumbers.forEach(function(n){n>u&&(a[n]=0)}),t.push(a)}),t}function l(n){for(var r=1;r<n.length;r++){if(n[r].headerNumber<n[r-1].headerNumber){var e=g.headerTagNumbers.filter(function(e){return e>n[r].headerNumber});e.forEach(function(e,t,o){for(var a=n[r-1][e],u=r-1;u>0&&0!=n[u][e];u--)n[u][e]=Math.round(n[u][e]/a*100)})}r==n.length-1&&g.headerTagNumbers.forEach(function(e,t,o){for(var a=n[r][e],u=r;u>=0&&0!=n[u][e];u--)n[u][e]=Math.round(n[u][e]/a*100)})}return n}function h(n){var r=l(d(n));return r.map(function(n,r,e){return p+g.headerTagNumbers.map(function(r){return n[r]}).join("_")})}function s(n,e){r.each(n,function(n,t){r(t).wrap("<div></div>");var o='<div class="donut-indent" style="float:left;"><canvas id="'+e[n]+'"></div>';r(t).before(o)})}function m(){var e=r(":header"),t=h(e);s(e,t),t.forEach(function(n){f(n)});var o=n("./overlay-content.js"),a=o(e,g.settings.indentDepth);r("#modal-content").children().remove(),r("#modal-content").append(a)}var v=(n("./modal.js"),10),p="donut_indent_",g={};g={defaults:{indentDepth:3,color:"#59bb0c",gammmaValue:1.8},settings:r.extend(!0,{},g.defaults),init:function(e){var t=n("./color.js");g.settings=r.extend(g.defaults,e),g.headerTagNumbers=Array.apply(null,Array(g.settings.indentDepth)).map(function(n,r){return r+1}),g.radiusRatio=r.extend(!0,[],g.headerTagNumbers).reverse().map(function(n){return Math.pow(1*n/g.headerTagNumbers.length,1/g.settings.gammmaValue)}),g.color=g.headerTagNumbers.map(function(n){return t.darken(g.settings.color,v*(n-1))})}},r.donutIndent=function(n){g.init(n),m()}}(jQuery),$.donutIndent()},{"./color.js":1,"./modal.js":3,"./overlay-content.js":4}],3:[function(n,r,e){function t(){var n=$(window).width(),r=$(window).height(),e=$("#modal-content").outerWidth(),t=$("#modal-content").outerHeight();$("#modal-content").css({left:(n-e)/2+"px",top:(r-t)/2+"px"})}$(document).on("click",".donut-indent",function(){return $(this).blur(),$("#modal-overlay")[0]?!1:($("body").append('<div id="modal-overlay"></div>'),$("#modal-overlay").fadeIn("slow"),t(),$("#modal-content").fadeIn("slow"),void $("#modal-overlay, #modal-close").on("click",function(){$("#modal-content,#modal-overlay").fadeOut("slow",function(){$("#modal-overlay").remove()})}))}),$(window).resize(t)},{}],4:[function(n,r,e){r.exports=function(n,r){for(var e="<ul>",t=0,o=1;o<n.length;o++){var a=n[o],u=n[o].tagName.replace("H","")-n[o-1].tagName.replace("H","")-0;if(console.log(u),u>0){for(var i="",c=0;u>c;c++)i+="<ul>";e+=i}if(0>u){for(var f="",c=0;-u>c;c++)f+="</ul>";e+=f}t+=u;var d=$(a).text();e+="<li>"+d+"</li>"}if(t>0){for(var f="",c=0;t>c;c++)f+="</ul>";e+=f}return e}},{}]},{},[2]);