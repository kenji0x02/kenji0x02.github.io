/**
 * donut-indent 0.0.1
 * Copyright (c) 2015, kenji0x02. MIT Licensed
 * https://github.com/kenji0x02/donut-indent 
 */
!function n(r,t,e){function o(u,i){if(!t[u]){if(!r[u]){var c="function"==typeof require&&require;if(!i&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var f=t[u]={exports:{}};r[u][0].call(f.exports,function(n){var t=r[u][1][n];return o(t?t:n)},f,f.exports,n,r,t,e)}return t[u].exports}for(var a="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(n,r,t){function e(n){var r=[],n=n.replace(/^#/,"");return r=6==n.length?n.match(/.{2}/g).map(function(n){return parseInt(n,16)}):n.split("").map(function(n){return parseInt(n+n,16)})}function o(n,r,t){return"#"+[n,r,t].map(function(n){return n.toString(16).replace(/^[0-9a-f]$/,"0$&")}).join("")}function a(n,r,t){var e,o,a;n/=255,r/=255,t/=255;var u=Math.max(Math.max(n,r),t),i=Math.min(Math.min(n,r),t);for(e=u==i?0:u==n?60*(r-t)/(u-i)+0:u==r?60*(t-n)/(u-i)+120:60*(n-r)/(u-i)+240;0>e;)e+=360;return o=(u+i)/2,a=u==i?0:.5>o?(u-i)/(u+i):(u-i)/(2-u-i),{h:e,l:o,s:a,type:"HLS"}}function u(n,r,t){for(var e,o,a;0>n;)n+=360;if(n%=360,0==t)return r=Math.round(255*r),{r:r,g:r,b:r,type:"RGB"};var u,i=.5>r?r*(1+t):r+t-r*t,c=2*r-i;return u=n+120,u>360&&(u-=360),e=60>u?c+(i-c)*u/60:180>u?i:240>u?c+(i-c)*(240-u)/60:c,u=n,o=60>u?c+(i-c)*u/60:180>u?i:240>u?c+(i-c)*(240-u)/60:c,u=n-120,0>u&&(u+=360),a=60>u?c+(i-c)*u/60:180>u?i:240>u?c+(i-c)*(240-u)/60:c,{r:Math.round(255*e),g:Math.round(255*o),b:Math.round(255*a),type:"RGB"}}r.exports.darken=function(n,r){var t=e(n),i=a(t[0],t[1],t[2]),c=u(i.h,i.l-.01*r,i.s);return o(c.r,c.g,c.b)}},{}],2:[function(n,r,t){!function(r){"use strict";function t(n){return r(n+":header").css("fontSize").replace("px","")-0}function e(n){return r(n+":header").css("line-height").replace("px","")-0}function o(n){return Math.round(.45*n)}function a(n,r){return Math.round(.05*r+.5*(n-r))}function u(n){return Math.round(.45*n)}function i(n,t,e){r(e).css("margin-top",t),r(e).css("margin-right",t),e.width=n,e.height=n}function c(n,r,t,e,o){var a=o.getContext("2d"),u=1.5707963267948966,i=-u,c=u*(.04*t-1);a.beginPath(),a.moveTo(r,r),a.arc(r,r,n,i,c,!1),a.fillStyle=e,a.fill()}function d(n){var r=n.replace("donut_indent_","").split("_").map(function(n){return n-0}),d="h"+r.filter(function(n,r,t){return 0!=n}).length,f=t(d),l=e(d),h=o(f),s=a(l,f),m=u(f),v=document.getElementById(n);i(2*h,s,v),r.forEach(function(n,r,t){var e=Math.round(h*g.radiusRatio[r]);c(e-1,m,100,"#fff",v),c(e,m,n,g.color[r],v)})}function f(n){var t={};g.headerTagNumbers.forEach(function(n){t[n]=0});var e=[];return r.each(n,function(n,o){var a=r.extend(!0,{},t);n>0&&(a=r.extend(!0,{},e[n-1]));var u=o.tagName.replace("H","")-0;a.headerNumber=u,a[u]+=1,g.headerTagNumbers.forEach(function(n){n>u&&(a[n]=0)}),e.push(a)}),e}function l(n){for(var r=1;r<n.length;r++){if(n[r].headerNumber<n[r-1].headerNumber){var t=g.headerTagNumbers.filter(function(t){return t>n[r].headerNumber});t.forEach(function(t,e,o){for(var a=n[r-1][t],u=r-1;u>0&&0!=n[u][t];u--)n[u][t]=Math.round(n[u][t]/a*100)})}r==n.length-1&&g.headerTagNumbers.forEach(function(t,e,o){for(var a=n[r][t],u=r;u>=0&&0!=n[u][t];u--)n[u][t]=Math.round(n[u][t]/a*100)})}return n}function h(n){var r=l(f(n));return r.map(function(n,r,t){return p+g.headerTagNumbers.map(function(r){return n[r]}).join("_")})}function s(n,t){r.each(n,function(n,e){r(e).wrap("<div></div>");var o='<div class="donut-indent" style="float:left;"><canvas id="'+t[n]+'"></div>';r(e).before(o)})}function m(){var n=r(":header"),t=h(n);s(n,t),t.forEach(function(n){d(n)})}var v=(n("./modal.js"),10),p="donut_indent_",g={};g={defaults:{indentDepth:3,color:"#59bb0c",gammmaValue:1.8},settings:r.extend(!0,{},g.defaults),init:function(t){var e=n("./color.js");g.settings=r.extend(g.defaults,t),g.headerTagNumbers=Array.apply(null,Array(g.settings.indentDepth)).map(function(n,r){return r+1}),g.radiusRatio=r.extend(!0,[],g.headerTagNumbers).reverse().map(function(n){return Math.pow(1*n/g.headerTagNumbers.length,1/g.settings.gammmaValue)}),g.color=g.headerTagNumbers.map(function(n){return e.darken(g.settings.color,v*(n-1))})}},r.donutIndent=function(n){g.init(n),m()}}(jQuery),$.donutIndent()},{"./color.js":1,"./modal.js":3}],3:[function(n,r,t){function e(){var n=$(window).width(),r=$(window).height(),t=$("#modal-content").outerWidth(),e=$("#modal-content").outerHeight();$("#modal-content").css({left:(n-t)/2+"px",top:(r-e)/2+"px"})}$(document).on("click",".donut-indent",function(){return $(this).blur(),$("#modal-overlay")[0]?!1:($("body").append('<div id="modal-overlay"></div>'),$("#modal-overlay").fadeIn("slow"),e(),$("#modal-content").fadeIn("slow"),void $("#modal-overlay, #modal-close").on("click",function(){$("#modal-content,#modal-overlay").fadeOut("slow",function(){$("#modal-overlay").remove()})}))}),$(window).resize(e)},{}]},{},[2]);